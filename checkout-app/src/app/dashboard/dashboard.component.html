<div class="container">
  <div class="row m-0">
    <div id="postcode-entry col-12 col-lg-8 col-md-7">
      <h3>
        What's your postcode?
      </h3>
      <div class="form-group">
        <small id="passwordHelpInline" class="text-muted">
          e.g. SW1A 1AA
        </small>
        <input type="text" class="form-control" [formControl]="postcode" />
      </div>
    </div>
  </div>

  <h3>Pick a store to find a delivery slot</h3>
  <div class="row m-0">
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mr-lg-3 ml-lg-0"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('asda')"
    >
      <div
        id="asdaWrapper"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('asda') }"
      ></div>
    </div>
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('iceland')"
    >
      <div
        id="icelandWrapper"
        class="text-center d-flex align-items-baseline"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('iceland') }"
      ></div>
    </div>
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('sainsburys')"
    >
      <div
        id="sainsburysWrapper"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('sainsburys') }"
      ></div>
    </div>

    <div
      class="col-12 justify-content-center text-center text-sm-center justify-content-lg-start text-lg-left p-0"
    >
      <button
        [disabled]="searchInProgress || !selectedSupermarket.length"
        type="button"
        class="btn btn-primary my-3"
        (click)="scheduleJob()"
      >
        Email me when a slot is found
      </button>
      <div *ngIf="searchInProgress" class="alert alert-secondary" role="alert">
        <h5 class="alert-heading">
          <strong>Your search is in progress</strong>
        </h5>
        <p>
          You will receive an email as soon as we find a slot. You can leave
          this page now.
        </p>

        <div
          class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3"
          *ngFor="let activeSearch of activeSearches"
        >
          <p>{{ activeSearch.store }}, created at {{ activeSearch.created }}</p>
        </div>
      </div>
    </div>
  </div>
  <hr />
  <h3>Recently completed searches</h3>
  <div *ngIf="recentSearches.length">
    <div *ngFor="let search of recentSearches">
      {{ search.store }} -
      {{ search.created }}
    </div>
  </div>
  <div *ngIf="!recentSearches.length">
    <p>No searches have been completed yet</p>
  </div>
</div>
