<div class="container">
  <div class="row mx-0 mt-0 mb-4">
    <div class="col-12 col-lg-6 mx-0 mt-0 mb-5 p-0" *ngIf="errors.length">
      <div
        class="alert alert-warning alert-dismissible fade show"
        role="alert"
        *ngFor="let error of errors"
      >
        <small>
          <span
            ><strong
              >We ran into some issues with your recent search for
              {{ error.supermarket }}:
            </strong></span
          >
        </small>
        <small>{{ error.errorMessage }}</small>
      </div>
      <button
        class="btn btn-secondary"
        type="button"
        aria-label="Dismiss"
        (click)="dismissError()"
      >
        <small> Dismiss</small>
      </button>
    </div>
    <div class="postcode-entry col-12 col-lg-8 col-md-7 m-0 p-0">
      <h3>
        What's your postcode?
      </h3>
      <div class="form-group">
        <small id="passwordHelpInline" class="text-muted">
          e.g. SW1A 1AA
        </small>
        <input type="text" class="form-control" [formControl]="postcode" />
      </div>
    </div>
  </div>

  <h3>Pick a store to find a delivery slot</h3>
  <div class="row m-0">
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mr-lg-3 ml-lg-0"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('asda')"
    >
      <div
        id="asdaWrapper"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('asda') }"
      ></div>
    </div>
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('iceland')"
    >
      <div
        id="icelandWrapper"
        class="text-center d-flex align-items-baseline"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('iceland') }"
      ></div>
    </div>
    <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3"
      type="button"
      [ngClass]="{ isDisabled: searchInProgress }"
      (click)="searchInProgress ? '' : selectSupermarket('sainsburys')"
    >
      <div
        id="sainsburysWrapper"
        [ngClass]="{ grayscale: !selectedSupermarket.includes('sainsburys') }"
      ></div>
    </div>

    <div
      class="col-12 justify-content-center text-center text-sm-center justify-content-lg-start text-lg-left p-0"
    >
      <button
        [disabled]="searchInProgress || !selectedSupermarket.length"
        type="button"
        class="btn btn-primary my-3"
        (click)="scheduleJob()"
      >
        Email me when a slot is found
      </button>
    </div>
  </div>
  <div
    *ngIf="searchInProgress"
    class="alert alert-secondary row m-0"
    role="alert"
  >
    <div class="col-12">
      <h5 class="alert-heading">
        <strong
          >Your search is in progress. We'll email you when we find a
          slot.</strong
        >
      </h5>
      <p>
        You will receive an email per supermarket. These emails may not arrive
        together as it depends on the availability of slots.
      </p>
      <p>
        <em>
          We may accidentally end up in your spam/junk folder, so keep an eye
          out.</em
        >
      </p>
      <p>You can leave this page now.</p>

      <!-- <hr />
      <h5>Active right now</h5> -->
    </div>
    <div class="col-12 col-md-6 col-lg-5 my-2 mx-auto">
      <img
        src="../../assets/dashboard/searching.svg"
        class="img-fluid searching"
        alt="illustration of a woman holding a magnifying glass in front of a browser window"
      />
    </div>
    <!-- <div
      class="card supermarket-card col-12 col-lg-3 mx-auto my-3 mx-lg-3 text-center"
      *ngFor="let activeSearch of activeSearches"
    >
      <img
        src="../../assets/supermarkets/{{ activeSearch.store }}_logo.png "
        alt="{{ activeSearch.store }} logo"
        class="img-fluid my-auto px-2 py-3"
      />
      <p class="my-auto px-4">
        <strong>started search at {{ activeSearch.created }}</strong>
      </p>
    </div> -->
  </div>
  <!-- <hr />
  <h3>Recently completed searches</h3>
  <div *ngIf="recentSearches.length">
    <div *ngFor="let search of recentSearches">
      {{ search.store }} -
      {{ search.created }}
    </div>
  </div>
  <div *ngIf="!recentSearches.length">
    <p>No searches have been completed yet</p>
  </div> -->
</div>
